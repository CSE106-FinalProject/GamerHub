<!DOCTYPE html>

<title>Page Title</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<link rel="stylesheet" href="../static/videoUpload.css">
<!-- cloudinary upload widget -->

<body>
    <div class="parent-container">
        <h1>This is it</h1>
        <div class="parent-upload">
            <button id="upload_widget" class="cloudinary-button">
                Upload files
            </button>
        </div>

        <form method="POST">

            <label for="game">Choose a car:</label>
            <select id="game" name="game" required>
                <option value="Valorant">Valorant</option>
                <option value="Fortnite">Fortnite</option>
                <option value="Minecraft">Minecraft</option>
                <option value="Apex">Apex</option>
                <option value="Modern Warfare 2">Modern Warfare 2</option>
                <option value="Overwatch 2">Overwatch 2</option>
            </select>
            <div class="fields">
                <input class="text-field" type="hidden" id="txtField" name="videoURL">
            </div>
            <input type="submit" value="Submit">
        </form>
    </div>

    <script src='https://upload-widget.cloudinary.com/global/all.js' type='text/javascript'></script>

    <script type="text/javascript">
        let myWidget = cloudinary.createUploadWidget({
            cloudName: 'de6unmlql',
            uploadPreset: 'gnvtkenr'
        }, (error, result) => {
            if (!error && result && result.event === "success") {
                console.log('Done! Here is the image info: ', result.info.secure_url);
                document.getElementById('txtField').value = result.info.secure_url;
            }
        })
        document.getElementById("upload_widget").addEventListener("click", function () {
            myWidget.open();
        }, false);
    </script>


</body>

</html>